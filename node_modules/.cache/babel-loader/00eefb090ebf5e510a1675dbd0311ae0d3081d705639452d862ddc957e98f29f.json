{"ast":null,"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.HeartBeat = void 0;\nconst events_1 = require(\"events\");\nconst time_1 = require(\"@walletconnect/time\");\nconst types_1 = require(\"./types\");\nconst constants_1 = require(\"./constants\");\nclass HeartBeat extends types_1.IHeartBeat {\n  constructor(opts) {\n    super(opts);\n    this.events = new events_1.EventEmitter();\n    this.interval = constants_1.HEARTBEAT_INTERVAL;\n    this.interval = (opts === null || opts === void 0 ? void 0 : opts.interval) || constants_1.HEARTBEAT_INTERVAL;\n  }\n  static init(opts) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const heartbeat = new HeartBeat(opts);\n      yield heartbeat.init();\n      return heartbeat;\n    });\n  }\n  init() {\n    return __awaiter(this, void 0, void 0, function* () {\n      yield this.initialize();\n    });\n  }\n  on(event, listener) {\n    this.events.on(event, listener);\n  }\n  once(event, listener) {\n    this.events.once(event, listener);\n  }\n  off(event, listener) {\n    this.events.off(event, listener);\n  }\n  removeListener(event, listener) {\n    this.events.removeListener(event, listener);\n  }\n  initialize() {\n    return __awaiter(this, void 0, void 0, function* () {\n      setInterval(() => this.pulse(), time_1.toMiliseconds(this.interval));\n    });\n  }\n  pulse() {\n    this.events.emit(constants_1.HEARTBEAT_EVENTS.pulse);\n  }\n}\nexports.HeartBeat = HeartBeat;","map":{"version":3,"names":["events_1","require","time_1","types_1","constants_1","HeartBeat","IHeartBeat","constructor","opts","events","EventEmitter","interval","HEARTBEAT_INTERVAL","init","heartbeat","initialize","on","event","listener","once","off","removeListener","setInterval","pulse","toMiliseconds","emit","HEARTBEAT_EVENTS","exports"],"sources":["../../src/heartbeat.ts"],"sourcesContent":[null],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,QAAA,GAAAC,OAAA;AACA,MAAAC,MAAA,GAAAD,OAAA;AAEA,MAAAE,OAAA,GAAAF,OAAA;AAEA,MAAAG,WAAA,GAAAH,OAAA;AAEA,MAAaI,SAAU,SAAQF,OAAA,CAAAG,UAAU;EAWvCC,YAAYC,IAAuB;IACjC,KAAK,CAACA,IAAI,CAAC;IALN,KAAAC,MAAM,GAAG,IAAIT,QAAA,CAAAU,YAAY,EAAE;IAE3B,KAAAC,QAAQ,GAAGP,WAAA,CAAAQ,kBAAkB;IAIlC,IAAI,CAACD,QAAQ,GAAG,CAAAH,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEG,QAAQ,KAAIP,WAAA,CAAAQ,kBAAkB;EACtD;EAbA,OAAaC,IAAIA,CAACL,IAAuB;;MACvC,MAAMM,SAAS,GAAG,IAAIT,SAAS,CAACG,IAAI,CAAC;MACrC,MAAMM,SAAS,CAACD,IAAI,EAAE;MACtB,OAAOC,SAAS;IAClB,CAAC;;EAWYD,IAAIA,CAAA;;MACf,MAAM,IAAI,CAACE,UAAU,EAAE;IACzB,CAAC;;EAEMC,EAAEA,CAACC,KAAa,EAAEC,QAAa;IACpC,IAAI,CAACT,MAAM,CAACO,EAAE,CAACC,KAAK,EAAEC,QAAQ,CAAC;EACjC;EAEOC,IAAIA,CAACF,KAAa,EAAEC,QAAa;IACtC,IAAI,CAACT,MAAM,CAACU,IAAI,CAACF,KAAK,EAAEC,QAAQ,CAAC;EACnC;EAEOE,GAAGA,CAACH,KAAa,EAAEC,QAAa;IACrC,IAAI,CAACT,MAAM,CAACW,GAAG,CAACH,KAAK,EAAEC,QAAQ,CAAC;EAClC;EAEOG,cAAcA,CAACJ,KAAa,EAAEC,QAAa;IAChD,IAAI,CAACT,MAAM,CAACY,cAAc,CAACJ,KAAK,EAAEC,QAAQ,CAAC;EAC7C;EAIcH,UAAUA,CAAA;;MACtBO,WAAW,CAAC,MAAM,IAAI,CAACC,KAAK,EAAE,EAAErB,MAAA,CAAAsB,aAAa,CAAC,IAAI,CAACb,QAAQ,CAAC,CAAC;IAC/D,CAAC;;EAEOY,KAAKA,CAAA;IACX,IAAI,CAACd,MAAM,CAACgB,IAAI,CAACrB,WAAA,CAAAsB,gBAAgB,CAACH,KAAK,CAAC;EAC1C;;AA5CFI,OAAA,CAAAtB,SAAA,GAAAA,SAAA","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}